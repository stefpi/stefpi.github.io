<!DOCTYPE html>
<html>
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./index.css">

  <script>
  const a = 0.01;
  const b = 0.0006;
  const c = "";

  const radius = 2;

  function xyfinder(k,c=0) {
    m = a * Math.cos(k) * Math.E**(b*k);
    n = a * Math.sin(k) * Math.E**(b*k);

    x = m * Math.cos(c) - n * Math.sin(c);

    y = m * Math.sin(c) + n * Math.cos(c);

    return [x,y]
  }

  async function drawFace() {
    const faceElement = document.getElementById('face');
    const response = await fetch('face.txt');
    const face = await response.text();
    faceElement.innerText = face;
  }

  async function runPlotter() {
    // let density = "$@B%8&#-_+~<>;:,^`'.".split('').reverse();
    let density = "   .:-i|=+%O#@".split('')

    const response = await fetch('function.json');
    const points = await response.json();

    canvas = document.querySelector('#plotter');
    canvasContainer = document.getElementById('canvas-container').getBoundingClientRect();
    
    console.log(canvasContainer)

    
    canvas.width = canvasContainer.width - 80;
    canvas.height = canvasContainer.height - 80;
    plotter = canvas.getContext("2d");
    plotter.translate(canvas.width/2, canvas.height/2);

    function drawNode(x, y, brightness) {
      plotter.beginPath();
      plotter.fillStyle = `rgba(255, 255, 255, ${brightness})`;
      // plotter.arc(x, y, radius, 0, Math.PI * 2, true);
      // plotter.arc(x, y, 3, 0, Math.PI * 2, true);
      plotter.rect(x, y, 3, 3);
      // plotter.strokeStyle = `rgba(255, 255, 255, ${brightness})`;
      // plotter.stroke();
      plotter.fill();
    }

    // function drawLetter(x, y, brightness) {
    //   console.log(brightness)
    //   plotter.font = '18px sans serif'
    //   plotter.fillStyle = "#FFFFFF"
    //   plotter.fillText(density[brightness], x, y)
    // }

    let angle = 0
    let c = 0.01

    // let g = (Math.random() * (0.7 - 0.6) + 0.6)
    // let j = (Math.random() * (0.7 - 0.6) + 0.6)
    // let k = (Math.random() * (0.7 - 0.6) + 0.6)

    // console.log(g, j, k)

    let startPoint = 6000;
    let rotating = true;
    var interval = window.setInterval(function () {
      plotter.save();
      plotter.rotate(angle);
      plotter.translate(-canvas.width/2, -canvas.height/2);
      plotter.clearRect(0, 0, canvas.width, canvas.height);
      plotter.restore();

      let h = 0.6289513340634733

      for (let l = startPoint; l < points.length; l++) {
        // drawNode(points[l][0], points[l][1], points[l][2]);
        drawNode(points[l][0], points[l][1], 0.4);
      }

      if (rotating) {
        angle += c
        angle = angle % (2*Math.PI)
        plotter.rotate(-c);
      }
    }, 50);
  }
  </script>
  </head>
  <body onload="runPlotter()">
    <div class="landing-container">
      <!-- <div class="hfw" id="canvas-container">
        <canvas id="plotter"></canvas>
      </div> -->
      <div class="hfw" id="menu-container">
        <img id="image" src="./spikeheadwhite.svg"></img>
        <a>
          <h1>about</h1>
        </a>
        <a>
          <h1>projects</h1>
        </a>
        <a>
          <h1>blog</h1>
        </a>
      </div>
    </div>
  </body>
</html>
